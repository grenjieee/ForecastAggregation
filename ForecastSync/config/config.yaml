# 服务器配置
server:
  port: 8081
  mode: debug

# 数据库配置
mysql:
  dsn: "postgres://postgres:postgres@127.0.0.1:5433/forecast_aggregation?sslmode=disable&TimeZone=Asia/Shanghai"
  max_open_conns: 20
  max_idle_conns: 10
  conn_max_lifetime: 3600s

# Circle 兑换（Kalshi 下单前链资产转 USD）
circle:
  base_url: "https://api-sandbox.circle.com"
  api_key: ""
  timeout: 30
  proxy: "http://127.0.0.1:7890"

# 同步配置（支持多平台独立调度）
sync:
  cron: "0 */1 * * *"  # 全局同步周期
  enabled_platforms: ["polymarket", "kalshi"]  # 启用的平台（当前仅对接这两个）

# 各平台独立配置
platforms:
  # Polymarket配置（gamma 拉事件，clob 下单）
  polymarket:
    base_url: "https://gamma-api.polymarket.com"
    clob_base_url: "https://clob.polymarket.com"  # CLOB 测试/生产共用，下单时使用
    protocol: "rest"
    timeout: 10
    retry_count: 2
    # 敏感信息从 .env 读取（POLYMARKET_AUTH_KEY、POLYMARKET_AUTH_SECRET、POLYMARKET_AUTH_TOKEN、POLYMARKET_AUTH_PRIVATE_KEY），此处留空
    auth_token: ""
    auth_key: ""
    auth_secret: ""
    auth_private_key: ""
    #代理地址（也可从 POLYMARKET_PROXY 覆盖）
    proxy: "http://127.0.0.1:7890"
    # 最小下注金额
    min_bet: 1
    # 最大下注金额
    max_bet: 1

  kalshi:
    # 测试环境: https://demo-api.kalshi.co/trade-api/v2  生产: https://api.elections.kalshi.com/trade-api/v2
    base_url: "https://demo-api.kalshi.co/trade-api/v2"
    sport_path: "/markets" # 预留
    # 仅拉取体育时：优先用 series_tickers 精准指定（推荐，避免 503 等不稳定 series）；或填单个 series_ticker；不填则从 GET /series 拉取体育类并缓存约 4 小时
    series_ticker: ""
    series_tickers: []   # 例: ["NFL", "NBA"] 只拉取这些系列，可避免 KXWNBAROTY 等易 503 的 series
    protocol: "rest"
    timeout: 60 # 超时（秒）；走代理或拉取 with_nested_markets 时响应较慢，建议 30~60
    retry_count: 3 # 重试次数
    # 敏感信息从 .env 读取（KALSHI_AUTH_KEY, KALSHI_AUTH_SECRET），不提交 git
    auth_key: ""
    auth_secret: ""
    #代理地址
    proxy: "http://127.0.0.1:7890"
    # 最小下注金额
    min_bet: 1
    # 最大下注金额
    max_bet: 1
